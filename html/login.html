<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <link rel="icon" type="image/x-icon" href="../image/DiscInLogo.png"/>
    <meta name="author" content="Ophelie Gavillet" content="Ugo Bismara"/>
    <meta name="description" content="This year‚Äôs edition is unlike any other‚Äîwhile we welcome everyone, we are prioritizing young participants to grow the next generation of ultimate players! We want everyone to be part of this incredible adventure, but this festival is especially designed to empower younger players and give them a platform to shine. Get ready for an unforgettable week of ultimate frisbee, music, creativity, and most importantly, community! The festival will take place in the beautiful setting of Saint-Martin-en-Haut, France üìç, from July 14th to July 19th, 2025 üìÜ."/>
    <meta name="keywords" content="disc in camp, camp 2025, ultimate frisbee, frisbee community, disc sport, ultimate team, frisbee family, competitive frisbee, team spirit, sports community, ultimate, frisbee, community, disc, sport, collective, family, camp, festival"/>
    <title>Disc In Camp | Players</title>
    <!-- Firebase SDK pour le navigateur -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="../style/login.css">
    <link rel="stylesheet" href="../style/style.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Blinker:wght@100;200;300;400;600;700;800;900&family=Gabarito:wght@400..900&display=swap" rel="stylesheet">
  </head>
  <body>
    <!--Header-->
    <section class="header">
        <a href="#" class="login-button" id="close-login-btn">
            <p class="log-option">Cancel</p>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
              <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
            </svg>
        </a>
        <a class="logo" href="../index.html">
            <img src="../image/DiscInLogo.png" alt="Logo" />
        </a>
    </section>

    <!--Main-->
    <main>
      <h1>LOGIN</h1>
      <p class="center">Ready to vibe with your personal space? Log in here and let your shine through!</p>
        <div id="auth-container">
          <h3>WELCOME BACK!</h3>
          <form>
            <label for="email">Email Address :</label>
            <input type="email" id="email" placeholder="example@example.com" required>

            <label for="password">Password :</label>
            <div class="password-container">
              <input type="password" id="password" placeholder="********" required>
              <span class="toggle-password">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#e78052" class="bi bi-eye-fill" viewBox="0 0 16 16">
                  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
                  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
                </svg>
              </span>
            </div>
          </form>

          <div class="remember-me">
            <input type="checkbox" id="remember">
            <label for="remember">Remember me!</label>
          </div>

          <button type ="submit" id="login-btn" class="official">LOGIN NOW <svg
            xmlns="http://www.w3.org/2000/svg"
            width="0.8rem"
            height="0.8rem"
            fill="currentColor"
            class="bi bi-caret-right-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
            />
          </svg></button>
          <button id="logout-btn" style="display:none;">Logout</button>
          
          <a href="#" id="forgot-password" class="forgot-password">Forgot your vibe check password?</a>

          <p id="user-info"></p>
        </div>

        <p class="center">By clicking on ‚ÄúLogin now‚Äù you agree to <a class="terms" href="#">Terms of Service</a> | <a class="terms" href="#">Privacy Policy</a></p>
    </main>

   <!--Footer-->
   <div class="navbar">
    <a href="../index.html" class="navbar-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="8vw" height="8vw" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
      </svg>
      HOME
    </a>
    <a href="players.html" class="navbar-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="8vw" height="8vw" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
        <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1zm-7.978-1L7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002-.014.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0M6.936 9.28a6 6 0 0 0-1.23-.247A7 7 0 0 0 5 9c-4 0-5 3-5 4q0 1 1 1h4.216A2.24 2.24 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816M4.92 10A5.5 5.5 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/>
      </svg>
      PLAYERS
    </a>
    <a href="schedule.html" class="navbar-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="8vw" height="8vw" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
      </svg>
      SCHEDULE
    </a>
    <a href="feedback.html" class="navbar-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="8vw" height="8vw" fill="currentColor" class="bi bi-chat-square-text" viewBox="0 0 16 16">
        <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
        <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
      </svg>
      FEEDBACK
    </a>
    <a href="news.html" class="navbar-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="8vw" height="8vw" fill="currentColor" class="bi bi-newspaper" viewBox="0 0 16 16">
        <path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5z"/>
        <path d="M2 3h10v2H2zm0 3h4v3H2zm0 4h4v1H2zm0 2h4v1H2zm5-6h2v1H7zm3 0h2v1h-2zM7 8h2v1H7zm3 0h2v1h-2zm-3 2h2v1H7zm3 0h2v1h-2zm-3 2h2v1H7zm3 0h2v1h-2z"/>
      </svg>
      NEWS
    </a>
  </div>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCiy-xiOoMMgr4rwBKwGQRsA9fleX1_wT8",
      authDomain: "disc-in-camp.firebaseapp.com",
      databaseURL: "https://disc-in-camp-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "disc-in-camp",
      storageBucket: "disc-in-camp.appspot.com",
      messagingSenderId: "128937547779",
      appId: "1:128937547779:web:22677cb4478cffaf1a1636",
      measurementId: "G-Y4KZY16LFF",
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // V√©rifier si Firebase Auth fonctionne bien
    console.log("Firebase Auth charg√© :", auth);

    // S√©lection des √©l√©ments HTML
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const loginBtn = document.getElementById("login-btn");
    const logoutBtn = document.getElementById("logout-btn");
    const userInfo = document.getElementById("user-info");
    const rememberMeCheckbox = document.getElementById("remember");

    // V√©rifier si "Remember Me" a √©t√© activ√© pr√©c√©demment
    document.addEventListener("DOMContentLoaded", () => {
        const savedEmail = localStorage.getItem("savedEmail");
        const rememberMe = localStorage.getItem("rememberMe");

        if (rememberMe === "true" && savedEmail) {
            emailInput.value = savedEmail;
            rememberMeCheckbox.checked = true;
        }

        auth.onAuthStateChanged((user) => {
            if (user) {
              window.location.href = "my-profile.html";
            } else {
                userInfo.textContent = "Please sign in.";
                toggleUI(false);
            }
        });
    });

    // Fonction de connexion avec Email/Mot de passe
    loginBtn.addEventListener("click", (event) => {
        event.preventDefault(); // Emp√™cher le rechargement de la page

        const email = emailInput.value;
        const password = passwordInput.value;

        if (email && password) {
            auth.setPersistence(rememberMeCheckbox.checked ? firebase.auth.Auth.Persistence.LOCAL : firebase.auth.Auth.Persistence.SESSION)
                .then(() => {
                    return auth.signInWithEmailAndPassword(email, password);
                })
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log("Connexion r√©ussie :", user.email);

                    // G√©rer "Remember Me"
                    if (rememberMeCheckbox.checked) {
                        localStorage.setItem("rememberMe", "true");
                        localStorage.setItem("savedEmail", email);
                    } else {
                        localStorage.removeItem("rememberMe");
                        localStorage.removeItem("savedEmail");
                    }

                    window.location.href = "my-profile.html";

                })
                .catch((error) => {
                    alert("Error while signing in : " + error.message);
                });
        } else {
            alert("Please enter email and password.");
        }
    });

    // Fonction de d√©connexion
    logoutBtn.addEventListener("click", () => {
        auth.signOut().then(() => {
            console.log("Utilisateur d√©connect√©");

            // Supprimer les donn√©es locales
            localStorage.removeItem("rememberMe");
            localStorage.removeItem("savedEmail");

            emailInput.value = "";
            passwordInput.value = "";
            rememberMeCheckbox.checked = false;

            userInfo.textContent = "Disconnected";
            toggleUI(false);
        }).catch((error) => {
            alert("Erreur lors de la d√©connexion : " + error.message);
        });
    });

    // Fonction pour mettre √† jour l'affichage selon l‚Äô√©tat de connexion
    const toggleUI = (isLoggedIn) => {
        emailInput.style.display = isLoggedIn ? "none" : "block";
        passwordInput.style.display = isLoggedIn ? "none" : "block";
        loginBtn.style.display = isLoggedIn ? "none" : "block";
        logoutBtn.style.display = isLoggedIn ? "block" : "none";
    };

    // Afficher/Masquer le mot de passe
    document.addEventListener("DOMContentLoaded", () => {
        const togglePassword = document.querySelector(".toggle-password");

        togglePassword.addEventListener("click", () => {
            if (passwordInput.type === "password") {
                passwordInput.type = "text"; // Afficher le mot de passe
            } else {
                passwordInput.type = "password"; // Cacher le mot de passe
            }
        });
    });

    document.addEventListener("DOMContentLoaded", () => {
    const closeButton = document.getElementById("close-login-btn"); // Remplace par l'ID exact de ton bouton

    if (closeButton) {
        closeButton.addEventListener("click", (event) => {
            event.preventDefault(); // Emp√™che toute autre action par d√©faut
            window.history.back(); // Revient √† la page pr√©c√©dente
        });
    }
});

document.addEventListener("DOMContentLoaded", () => {
    const auth = firebase.auth();
    const forgotPasswordLink = document.getElementById("forgot-password");

    forgotPasswordLink.addEventListener("click", (event) => {
        event.preventDefault(); // Emp√™che la navigation par d√©faut

        const email = prompt("Enter your email to reset your password:");

        if (email) {
            auth.sendPasswordResetEmail(email)
                .then(() => {
                    alert("An email has been sent to reset your password. Check your inbox.");
                })
                .catch((error) => {
                    console.error("Error:", error);
                    alert("Error: " + error.message);
                });
        }
    });
});

</script>

  </body>
</html>