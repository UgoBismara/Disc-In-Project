<!-- Participant Details Page with Clickable Photo -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participant Details</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="styles 2.css">
</head>
<body>
    <div class="container">
        <div id="participant-info"></div>
        <div id="modal" class="modal">
            <span class="close" id="closeModal">&times;</span>
            <img class="modal-content" id="modalImage">
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCiy-xiOoMMgr4rwBKwGQRsA9fleX1_wT8",
            authDomain: "disc-in-camp.firebaseapp.com",
            databaseURL: "https://disc-in-camp-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "disc-in-camp",
            storageBucket: "disc-in-camp.appspot.com",
            messagingSenderId: "128937547779",
            appId: "1:128937547779:web:22677cb4478cffaf1a1636",
            measurementId: "G-Y4KZY16LFF"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const participantId = sessionStorage.getItem('participantId') - 1;
        const participantInfoDiv = document.getElementById('participant-info');
        const modal = document.getElementById('modal');
        const modalImage = document.getElementById('modalImage');
        const closeModal = document.getElementById('closeModal');

        closeModal.onclick = () => {
            modal.style.display = "none";
        };

        window.onclick = (event) => {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        };

        database.ref(`/${participantId}`).on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                participantInfoDiv.innerHTML = `
                    <div class="photo-container">
                        <img src="${data.Picture}" alt="Photo of ${data.Name}" id="participantPhoto">
                    </div>
                    <div class="info-container">
                        <h1>${data.Name}</h1>
                        <p><strong>Money:</strong> ${data.Money} â‚¬</p>
                      
                        <ul>
                            ${(data.Program || []).map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;

                const participantPhoto = document.getElementById('participantPhoto');
                participantPhoto.onclick = () => {
                    modal.style.display = "block";
                    modalImage.src = data.Picture;
                };
            } else {
                participantInfoDiv.innerHTML = '<p>Participant not found!</p>';
            }
        });
    </script>
</body>
</html>
