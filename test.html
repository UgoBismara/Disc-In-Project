<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <link rel="icon" type="image/x-icon" href="image/DiscInLogo.png" />
    <meta name="author" content="Ophelie Gavillet" content="Ugo Bismara" />
    <meta
      name="description"
      content="This yearâ€™s edition is unlike any otherâ€”while we welcome everyone, we are prioritizing young participants to grow the next generation of ultimate players! We want everyone to be part of this incredible adventure, but this festival is especially designed to empower younger players and give them a platform to shine. Get ready for an unforgettable week of ultimate frisbee, music, creativity, and most importantly, community! The festival will take place in the beautiful setting of Saint-Martin-en-Haut, France ðŸ“, from July 14th to July 19th, 2025 ðŸ“†."
    />
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <meta
      name="keywords"
      content="ultimate frisbee, frisbee community, disc sport, ultimate team, frisbee family, competitive frisbee, team spirit, sports community, ultimate, frisbee, community, disc, sport, collective, family, camp, festival"
    />
    <title>Disc In Camp | Home</title>
    <link rel="stylesheet" href="style/style.css" />
    <link rel="stylesheet" href="test.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Blinker:wght@100;200;300;400;600;700;800;900&family=Gabarito:wght@400..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>

    <div class="carousel">
      <div class="carousel-caption">DISC IN CAMP 2025</div>
      <div class="carousel-track">
        <!-- Les images de Google Drive seront insÃ©rÃ©es ici -->
      </div>
    </div>
  
<script>
  const folderId = "1h98ol3V9DuKcqsMIx_Nchjj5EbZb2epB"; // Remplacez par l'ID de votre dossier
  const apiKey = "AIzaSyBsk4a5iiyBAhjEzczxaefZcpfOYLCA9CQ"; // Remplacez par votre clÃ© API

const carouselTrack = document.querySelector(".carousel-track");

async function fetchDriveImages() {
  // Construire l'URL pour l'API Google Drive avec la clÃ© API
  const url = `https://www.googleapis.com/drive/v3/files?q='${folderId}'+in+parents&key=${apiKey}&fields=files(id,name,mimeType)`;
  
  // Effectuer la requÃªte
  const response = await fetch(url);
  
  // VÃ©rifier si la rÃ©ponse est correcte (status 200)
  if (!response.ok) {
    console.error('Erreur de requÃªte API:', response.statusText);
    return;
  }
  
  // Extraire les donnÃ©es JSON de la rÃ©ponse
  const data = await response.json();
  
  // Filtrer uniquement les fichiers image
  const images = data.files.filter(file => file.mimeType.startsWith("image/"));

  // VÃ©rification des donnÃ©es des images
  console.log('Images rÃ©cupÃ©rÃ©es:', images);

  // Ajouter les images au carrousel
  carouselTrack.innerHTML = ""; // Vider les anciennes images
  images.forEach((image) => {
    const imgSrc = `https://api.allorigins.win/get?url=https://drive.google.com/uc?id=${image.id}`;
    console.log('Image source:', imgSrc); // VÃ©rifier que l'URL est correcte
    const slideDiv = document.createElement("div");
    slideDiv.classList.add("carousel-slide");
    slideDiv.innerHTML = `<img src="${imgSrc}" alt="${image.name}" />`;
    carouselTrack.appendChild(slideDiv);
  });

  // Initialiser le carrousel aprÃ¨s ajout des images
  initCarousel();
}

function initCarousel() {
  const slides = document.querySelectorAll(".carousel-slide");
  let currentIndex = 0;

  // DÃ©filement automatique
  setInterval(() => {
    slides[currentIndex].classList.remove("active");
    currentIndex = (currentIndex + 1) % slides.length;
    slides[currentIndex].classList.add("active");
  }, 3000); // Change de slide toutes les 3 secondes
}

// Appeler la fonction pour charger les images
fetchDriveImages();

</script>
  
  </body>
  </html>